webpackJsonp([20],{"4x/z":function(t,e,a){e=t.exports=a("XLS9")(!1),e.push([t.i,"\n\n",""])},OSYm:function(t,e,a){"use strict";function s(t){a("S7pd")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("3cXf"),o=a.n(i),r=a("04Cm"),l=a("Gcvq"),n=(a("mkH3"),a("O91/")),c=a("xPS6"),d={name:"cardOrderDetails",props:{list:Object,type:Number,number:String},data:function(){return{imgData:[],isShowDetails:0,typeDetails:0,detailsList:""}},components:{"um-details-view":c.a,ImgZoom:n.a},created:function(){var t=this;t.imgData=[{src:t.list.fourthImage,name:"手持"},{src:t.list.papersImage,name:"正面"},{src:t.list.backImage,name:"反面"}]},methods:{close:function(){this.$parent.off.details=!1},detailsOrder:function(){var t=this;Object(r.reqCommonMethod)({transactionId:t.list.orderId},function(){t.off.isLoad=!1},"km-ecs/w/audit/openCardInfo").then(function(e){var a=e.data,s="",i="";for(var o in a.optionalPackage)s+="<p>"+a.optionalPackage[o].title+"</p>";1==a.payed&&(i+='<li class="clr"><div class="fl">实付价格：</div><div class="fright">'+(parseFloat(a.actualPrice)/100).toFixed(2)+'元<b class="f-c-grey">（号码占用费'+(parseFloat(a.actualPrice_x)/1e4).toFixed(2)+"元+预存话费"+(parseFloat(a.actualPrice_y)/1e4).toFixed(2)+'元）</b></div></li><li class="clr"><div class="fl">抵扣金额：</div><div class="fright">'+(parseFloat(a.deductionMoney)/100).toFixed(2)+'元</div></li><li class="clr"><div class="fl">开卡返佣：</div><div class="fright">'+(parseFloat(a.commission)/100).toFixed(2)+'元<b class="f-c-grey">（号码占用费'+(parseFloat(a.commission_x)/100).toFixed(2)+"元+预存话费"+(parseFloat(a.commission_y)/100).toFixed(2)+'元）</b></div></li><li class="clr"><div class="fl">支付模式：</div><div class="fright">'+a.payChannel+"</div></li>"),layer.open({content:'<ul class="f-scroll-lt lay-details"><li class="clr"><div class="fl">订单号：</div><div class="fright">'+a.sysOrderId+'</div></li><li class="clr"><div class="fl">BOSS流水号：</div><div class="fright">'+a.transactionId+'</div></li><li class="clr"><div class="fl">用户姓名：</div><div class="fright">'+a.userName+'</div></li><li class="clr"><div class="fl">电话号码：</div><div class="fright">'+a.phoneNumber+'（<b class="f-c-grey">'+t.$parent.translateData(5,a.phoneLevel)+"</b>，"+a.phoneHome+'）</div></li><li class="clr"><div class="fl">ICCID：</div><div class="fright">'+a.ICCID+'</div></li><li class="clr"><div class="fl">IMSI卡号：</div><div class="fright">'+a.esim+'</div></li><li class="clr"><div class="fl">状态修改时间：</div><div class="fright">'+t.$parent.getDateTime(a.timestamp)[6]+'</div></li><li class="clr"><div class="fl">应付价格：</div><div class="fright">'+(parseFloat(a.price_x)/100+parseFloat(a.price_y)/100).toFixed(2)+'元<b class="f-c-grey">（号码占用费'+(parseFloat(a.price_x)/100).toFixed(2)+"元+预存话费"+(parseFloat(a.price_y)/100).toFixed(2)+"元）</b></div></li>"+i+'<li class="clr"><div class="fl">已选套餐：</div><div class="fright">'+a.package+'</div></li><li class="clr"><div class="fl">已选可选包：</div><div class="fright">'+s+"</div></li></ul>",type:0,title:"开卡订单详情",btn:0,style:"width:auto;"})})},detailsPayOrder:function(){var t=this;Object(r.reqCommonMethod)({payId:t.list.payOrderId},function(){t.off.isLoad=!1},"km-ecs/w/audit/payInfo").then(function(t){var e=t.data;layer.open({content:'<ul class="f-scroll-lt lay-details"><li class="clr"><div class="fl">系统流水号：</div><div class="fright">'+e.sysPayId+'</div></li><li class="clr"><div class="fl">第三方流水号：</div><div class="fright">'+e.payId+'</div></li><li class="clr"><div class="fl">支付渠道：</div><div class="fright">'+e.payChannel+'</div></li><li class="clr"><div class="fl">支付方式：</div><div class="fright">'+e.payType+'</div></li><li class="clr"><div class="fl">支付金额：</div><div class="fright">'+e.payMoney+"元</div></li></ul>",type:0,title:"支付订单详情",btn:0,style:"width:auto;"})})},detailsUser:function(){var t=this;Object(r.reqCommonMethod)({userId:t.list.operatorId},function(){t.off.isLoad=!1},"km-ecs/w/audit/getUserInfo").then(function(e){t.detailsList=e.data,t.isShowDetails=!0,t.typeDetails=1})},detailsMerchant:function(){var t=this;Object(r.reqCommonMethod)({dealerId:t.list.dealerId},function(){t.off.isLoad=!1},"km-ecs/w/audit/getMerchantInfo").then(function(e){t.detailsList=e.data,t.isShowDetails=!0,t.typeDetails=2})},agree:function(){var t=this;Object(r.reqCommonMethod)({orderId:t.list.orderId},function(){t.off.isLoad=!1},"km-ecs/w/audit/reAudit").then(function(e){layer.open({content:"复审成功",skin:"msg",time:4,msgSkin:"success"}),t.list.status=4,t.list.cardStatus=1,t.$parent.list[parseInt(t.number)].status=4,t.$parent.list[parseInt(t.number)].cardStatus=1})},orderLog:function(){var t=this;Object(r.reqCommonMethod)({orderId:t.list.orderId},function(){t.off.isLoad=!1},"km-ecs/w/audit/log").then(function(e){var a="",s=e.data;for(var i in s)a+="<li><time><b></b>"+t.$parent.getDateTime(s[i].modifyTime)[6]+"</time><div>"+s[i].context+"</div></li>";layer.open({content:'<ul class="lay-log">'+a+"</ul>",type:0,title:"审核日志",btn:0,style:"width:auto;"})})},integralLog:function(){var t=this;Object(r.reqCommonMethod)({orderId:t.list.orderId},function(){t.off.isLoad=!1},"km-ecs/c/audit/searchIntegration").then(function(t){var e="";"1"!=t.data.cardStatus&&(e+="<li><span>原因：</span>"+t.data.cardStatusReason+"</li>"),layer.open({content:'<ul class="lay-integralLog"><li><span>本级获得积分：</span>'+t.data.integration+"积分</li><li><span>上级获得积分：</span>"+t.data.superiorIntegration+"积分</li>"+e+"</ul>",type:0,title:"积分查询",btn:0,style:"width:auto;"})})},filterReason:function(t){var e=t.split("|"),a=[],s=["非本人现场手持证卡照","证件与手持合影照中证件不同","证件填报信息与证照中信息不符(包括但不限于证件号码,姓名,地址等信息)","发证机关有误或与证件地址不符","部分或全部照片为翻拍或疑似合成"];for(var i in e)if(e[i]){a[i]={star:0,text:""};for(var o in s)s[o]==e[i]?a[i].star=!0:o==s.length-1&&(a[i].star=!1);a[i].text=e[i]}return a}}},m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"g-list-box",attrs:{id:"details"}},[a("header",{staticClass:"g-lis-head"},[a("a",{staticClass:"m-details-back u-icon-back",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"g-box"},[a("table",{staticClass:"g-list-table"},[a("tbody",[a("tr",[a("td",[a("table",{staticClass:"g-inner-table"},[a("tbody",[7!=t.list.operatorType?a("tr",[a("td",[t._v("订单号码：")]),a("td",[t._v(t._s(t.list.orderId))])]):t._e(),t._v(" "),a("tr",[a("td",[t._v("卡号：")]),a("td",[t._v(t._s(t.list.cardNumber))])]),t._v(" "),3==t.type||4==t.type?a("tr",[a("td",[t._v("订单状态：")]),a("td",[t._v(t._s(t.$parent.translateData(7,t.list.statusDetail)))])]):t._e(),t._v(" "),2==t.type?a("tr",[a("td",[t._v("号卡状态：")]),a("td",[t._v(t._s(t.$parent.translateData(4,t.list.cardStatus)))])]):t._e(),t._v(" "),a("tr",[a("td",[t._v("电话号码：")]),a("td",[t._v(t._s(t.list.phoneNumber))])]),t._v(" "),a("tr",[a("td",[t._v("用户姓名：")]),a("td",[t._v(t._s(t.list.userName))])]),t._v(" "),a("tr",[a("td",[t._v("身份证号码：")]),a("td",[t._v(t._s(t.list.papersCode))])]),t._v(" "),a("tr",[a("td",[t._v("用户地址：")]),a("td",[t._v(t._s(t.list.userAddress))])]),t._v(" "),a("tr",[a("td",[t._v("激活时间：")]),a("td",[t._v(t._s(t.list.opTime))])])])])]),t._v(" "),a("td",{staticClass:"m-box-img m-meida-640up"},[a("ImgZoom",{attrs:{imgData:t.imgData}})],1)]),t._v(" "),a("tr",{staticClass:"m-box-img m-meida-640down"},t._l(t.imgData,function(t){return a("img",{attrs:{src:t.src}})}))])])]),t._v(" "),t.isShowDetails?a("um-details-view",{attrs:{type:t.typeDetails,list:t.detailsList,dealerId:t.list.dealerId}}):t._e()],1)},f=[],v={render:m,staticRenderFns:f},p=v,u=a("Z0/y"),_=s,h=u(d,p,!1,_,"data-v-5aff1eea",null),g=h.exports,x=a("R2SV");a("Ue0x"),a("V+BO");var b={name:"ecsNetOrderList",data:function(){return{off:{buttonState:0,jsonData:{},type:1,isLoad:0,details:0,number:""},form:{source:6,orderType:6,cardType:0,orderStatus:0,auditType:9,context1:"",context2:"",context3:"",context4:"",context6:"",startTime:"",endTime:"",select:""},list:"",detailsData:"",total:0,pageNum:1,pageSize:10,maxpage:1,callback:Function}},components:{"my-page":l.a,"list-details":g},created:function(){this.init()},methods:{init:function(){var t=this;this.$route.params.type;t.form.startTime=laydate.now(0,"YYYY-MM-DD 00:00:00"),t.form.endTime=laydate.now(0,"YYYY-MM-DD 23:59:59")},searchList:function(t,e){var a=this.form.select,s=localStorage.getItem("KA_ECS_USER");s=JSON.parse(s);var i=s.customerId,l=this,n={customerId:i,orderId:"",phoneNumber:"",cardNumber:"",pageNum:"1",pageSize:"10",userName:"",papersCode:"",opTimeStart:l.form.startTime,opTimeEnd:l.form.endTime};if(1===t){if(l.off.buttonState=1,2==a&&""===l.form.context2)return layer.open({content:"请输入要查询的卡号",skin:"msg",time:4,msgSkin:"error"}),!1;if(6==a&&""===l.form.context6)return layer.open({content:"请输入要查询的手机号",skin:"msg",time:4,msgSkin:"error"}),!1;if(3==a&&""===l.form.context3)return layer.open({content:"请输入要查询的用户名",skin:"msg",time:4,msgSkin:"error"}),!1;if(4==a&&""===l.form.context4)return layer.open({content:"请输入要查询的身份证号",skin:"msg",time:4,msgSkin:"error"}),!1;2==a?n.cardNumber=l.form.context2:6==a?n.phoneNumber=l.form.context6:3==a?n.userName=l.form.context3:4==a&&(n.papersCode=l.form.context4)}else if("order"===t){if(l.off.buttonState="ord",!l.form.context1)return layer.open({content:"请输入订单号码",skin:"msg",time:2,msgSkin:"error"}),!1;n={customerId:i,orderId:l.form.context1,phoneNumber:"",cardNumber:"",pageNum:"1",pageSize:"10",userName:"",papersCode:"",opTimeStart:"",opTimeEnd:""}}if(1!==t&&"order"!==t||Object(r.reqCommonMethod)(n,function(){l.off.isLoad=!1},"km-ecs/w/boss/order/query").then(function(t){l.list=t.data.list,l.total=t.data.total,l.maxpage=Math.ceil(parseInt(t.data.total)/10),l.pageNum=e||1,l.callback=function(t){l.searchList(t)}}).catch(function(){l.off.isLoad=!1}),2===t){if(1===l.off.buttonState){var a=this.form.select;s=localStorage.getItem("KA_ECS_USER"),s=JSON.parse(s),i=s.customerId,l=this,n={customerId:i,orderId:"",phoneNumber:"",cardNumber:"",pageNum:"1",pageSize:"10",userName:"",papersCode:"",opTimeStart:l.form.startTime,opTimeEnd:l.form.endTime},n.codeId=s.codeId,2==a?n.cardNumber=l.form.context2:6==a?n.phoneNumber=l.form.context6:3==a?n.userName=l.form.context3:4==a&&(n.papersCode=l.form.context4);var c=BASE64.encode(o()(n))}else if("ord"===l.off.buttonState){n={customerId:"",orderId:"",phoneNumber:"",cardNumber:"",pageNum:"1",pageSize:"10",userName:"",papersCode:"",opTimeStart:" ",opTimeEnd:" "};var s=localStorage.getItem("KA_ECS_USER");s=JSON.parse(s),n.customerId=s.customerId,n.codeId=s.codeId,n.orderId=l.form.context1;var c=BASE64.encode(o()(n))}l.off.load=!0,Object(x.a)("km-ecs/w/boss/order/export",c,function(){l.off.load=!1})}},isChe:function(){this.form.select=""},details:function(t){var e=this,a=localStorage.getItem("KA_ECS_USER")[a],s={customerId:a,orderId:"",phoneNumber:"",cardNumber:"",pageNum:"1",pageSize:"10",userName:"",papersCode:"",opTimeStart:"",opTimeEnd:""};if(e.off.number=t.target.title,e.off.isLoad)return!1;e.off.isLoad=!0,s.orderId=t.target.name,Object(r.reqCommonMethod)(s,function(){e.off.isLoad=!1},"km-ecs/w/boss/order/query").then(function(t){e.detailsData=t.data.list[0],e.off.details=!0}).catch(function(){e.off.isLoad=!1})},to_laydate:function(t){var e=this;laydate({istime:!0,format:"YYYY-MM-DD hh:mm:ss",isclear:!1,choose:function(a){1==t?e.form.startTime=a:e.form.endTime=a}})}}},y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"g-search-menu"},[a("div",{class:{active:t.off.details},attrs:{id:"search"}},[a("header",{staticClass:"m-scroll-bar animated infinite",class:{active:t.off.isLoad}}),t._v(" "),t.off.details?t._e():a("section",[a("div",{staticClass:"g-search-form"},[t._m(0),t._v(" "),a("section",{staticClass:"form-c"},[a("div",{staticClass:"row clr m-col-2"},[a("span",{staticClass:"dp col-l"},[t._v("订单号码：")]),t._v(" "),a("div",{staticClass:"col-r m-input-button"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.context1,expression:"form.context1"}],attrs:{maxlength:"32",type:"tel",placeholder:"请输入查询的订单号码"},domProps:{value:t.form.context1},on:{input:function(e){e.target.composing||t.$set(t.form,"context1",e.target.value)}}}),a("button",{on:{click:function(e){t.searchList("order")}}},[t._v("查询")])])])]),t._v(" "),t._m(1),t._v(" "),a("section",{staticClass:"form-c"},[a("div",{staticClass:"row clr m-col-2"},[a("div",{staticClass:"dp col-l"},[t._v("时间区间：")]),t._v(" "),a("div",{staticClass:"col-r"},[a("span",{staticClass:"m-time-area"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.startTime,expression:"form.startTime"}],attrs:{type:"text",readonly:"readonly"},domProps:{value:t.form.startTime},on:{click:function(e){t.to_laydate(1)},input:function(e){e.target.composing||t.$set(t.form,"startTime",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.endTime,expression:"form.endTime"}],attrs:{type:"text",readonly:"readonly"},domProps:{value:t.form.endTime},on:{click:function(e){t.to_laydate(2)},input:function(e){e.target.composing||t.$set(t.form,"endTime",e.target.value)}}})])])])]),t._v(" "),a("section",{staticClass:"form-c o-no-bgc"},[a("div",{staticClass:"row",class:{active:2==t.form.select}},[a("span",{staticClass:"m-form-radio"},[a("label",[a("span",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.select,expression:"form.select"}],attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.form.select,"2")},on:{click:t.isChe,change:function(e){t.$set(t.form,"select","2")}}}),a("span")]),a("span",{staticClass:"text"},[t._v("卡号：")])])]),t._v(" "),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.context2,expression:"form.context2"}],attrs:{readonly:2!=t.form.select,maxlength:"25",type:"tel",placeholder:"请输入查询的卡号"},domProps:{value:t.form.context2},on:{input:function(e){e.target.composing||t.$set(t.form,"context2",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row",class:{active:6==t.form.select}},[a("span",{staticClass:"m-form-radio"},[a("label",[a("span",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.select,expression:"form.select"}],attrs:{type:"radio",value:"6"},domProps:{checked:t._q(t.form.select,"6")},on:{click:t.isChe,change:function(e){t.$set(t.form,"select","6")}}}),a("span")]),a("span",{staticClass:"text"},[t._v("手机号码：")])])]),t._v(" "),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.context6,expression:"form.context6"}],attrs:{readonly:6!=t.form.select,maxlength:"11",type:"tel",placeholder:"请输入查询的手机号码"},domProps:{value:t.form.context6},on:{input:function(e){e.target.composing||t.$set(t.form,"context6",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row",class:{active:3==t.form.select}},[a("span",{staticClass:"m-form-radio"},[a("label",[a("span",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.select,expression:"form.select"}],attrs:{type:"radio",value:"3"},domProps:{checked:t._q(t.form.select,"3")},on:{click:t.isChe,change:function(e){t.$set(t.form,"select","3")}}}),a("span")]),a("span",{staticClass:"text"},[t._v("用户姓名：")])])]),t._v(" "),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.context3,expression:"form.context3"}],attrs:{readonly:3!=t.form.select,maxlength:"18",type:"tel",placeholder:"请输入查询的用户姓名"},domProps:{value:t.form.context3},on:{input:function(e){e.target.composing||t.$set(t.form,"context3",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row",class:{active:4==t.form.select}},[a("span",{staticClass:"m-form-radio"},[a("label",[a("span",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.select,expression:"form.select"}],attrs:{type:"radio",value:"4"},domProps:{checked:t._q(t.form.select,"4")},on:{click:t.isChe,change:function(e){t.$set(t.form,"select","4")}}}),a("span")]),a("span",{staticClass:"text"},[t._v("身份证号：")])])]),t._v(" "),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.context4,expression:"form.context4"}],attrs:{readonly:4!=t.form.select,maxlength:"18",type:"text",placeholder:"请输入查询的身份证号码"},domProps:{value:t.form.context4},on:{input:function(e){e.target.composing||t.$set(t.form,"context4",e.target.value)}}})])]),t._v(" "),a("button",{staticClass:"f-btn f-btn-line",on:{click:function(e){t.searchList(1)}}},[t._v("查询")])])]),t._v(" "),t.list?a("div",{staticClass:"m-total-table"},[a("div",{staticClass:"total-head"},[t._v("\n              统计结果"),a("b",[t._v(t._s(t.total))]),t._v(" "),0!=t.list.length?a("button",{staticClass:"export_excel",attrs:{disabled:0==t.list.length},on:{click:function(e){t.searchList(2)}}},[t._v("导出excel")]):t._e()]),t._v(" "),a("table",[t._m(2),t._v(" "),a("tbody",t._l(t.list,function(e,s){return a("tr",[a("td",[t._v(t._s(10*(t.pageNum-1)+(s+1)))]),t._v(" "),a("td",[t._v(t._s(e.orderId))]),t._v(" "),a("td",[t._v(t._s(e.cardNumber))]),t._v(" "),a("td",[t._v(t._s(e.phoneNumber))]),t._v(" "),a("td",[t._v(t._s(e.userName))]),t._v(" "),a("td",[t._v(t._s(e.papersCode))]),t._v(" "),a("td",[t._v(t._s(e.userAddress))]),t._v(" "),a("td",[t._v(t._s(e.opTime))]),t._v(" "),a("td",[a("a",{staticClass:"details",attrs:{name:e.orderId,href:"javascript:void(0)"},on:{click:t.details}},[t._v("点击查看详情")])])])}))]),t._v(" "),a("my-page",{attrs:{page:t.pageNum,maxpage:t.maxpage,callback:t.callback}})],1):t._e()]),t._v(" "),t.off.details?a("list-details",{attrs:{list:t.detailsData,type:t.off.type,number:t.off.number}}):t._e()],1)])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-tag"},[a("b"),t._v("订单查询")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-tag"},[a("b"),t._v("条件查询")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("订单号")]),t._v(" "),a("th",[t._v("卡号")]),t._v(" "),a("th",[t._v("电话号码")]),t._v(" "),a("th",[t._v("用户姓名")]),t._v(" "),a("th",[t._v("身份证号码")]),t._v(" "),a("th",[t._v("用户地址")]),t._v(" "),a("th",[t._v("激活时间")]),t._v(" "),a("th",[t._v("详情")])])])}],I={render:y,staticRenderFns:C},S=I,N=a("Z0/y"),k=N(b,S,!1,null,null,null);e.default=k.exports},S7pd:function(t,e,a){var s=a("4x/z");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("FIqI")("0967e380",s,!0,{})}});